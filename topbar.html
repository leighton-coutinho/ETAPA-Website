<script>
    function isMobile() {
        var agent = navigator.userAgent.toLowerCase();
        return agent.indexOf("iphone") != -1 || agent.indexOf("ipad") != -1 || agent.indexOf("android") != -1;
    }

    function changeMenuOrientation() {
        setTimeout(function() {
            fixMenuViewportUnits(true);
        }, 200);
    }

    function fixMenuViewportUnits(reorient) {
        var vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        document.getElementById("menu").style.height = (vh - 10 * 5) + "px";

        var menuItems = document.getElementsByClassName("menuItem");
        for (var i = 0; i < menuItems.length; i++) {
            var width = menuItems[i].offsetWidth;
            menuItems[i].style.backgroundPosition = (width - (7.5 * 5)) + "px " + (3 * 5) + "px";
        }
    }

    function showMenuItem(menuItem) {
        hideAllMenuItems();
        var popup = menuItem.getElementsByClassName("popupMenu")[0];
        popup.style.display = "block";
        popup.style.visibility = "visible";
        menuItem.dataset.state = "visible";
    }

    function hideMenuItem(menuItem) {
        var popup = menuItem.getElementsByClassName("popupMenu")[0];
        popup.style.display = "none";
        popup.style.visibility = "hidden";
        menuItem.dataset.state = "hidden";
    }

    function hideAllMenuItems() {
        var menuItems = document.getElementsByClassName("menuItem");
        for (var i = 0; i < menuItems.length; i++) {
            hideMenuItem(menuItems[i]);
        }
    }

    function toggleMenu() {
        hideAllMenuItems();

        var menu = document.getElementById("menu");
        var hamburger = document.getElementById("hamburger");

        if (typeof(menu.dataset.state) === 'undefined')
            menu.dataset.state = "hidden";

        if (menu.dataset.state == "hidden") {
            menu.style.display = "block";
            menu.dataset.state = "visible";
            hamburger.src = "/images/hamburger-active.png";

            if (isMobile()) {
                document.getElementById("blackScreen").style.display = "block";
                disableScroll();
            }
            fixMenuViewportUnits(false);
        } else {
            menu.style.display = "none";
            menu.dataset.state = "hidden";
            hamburger.src = "/images/hamburger-inactive.png";

            if (isMobile()) {
                document.getElementById("blackScreen").style.display = "none";
                enableScroll();
            }
        }
    }
</script>

<div class="topbar" style="display: flex; align-items: center; width: 100%; background-color: #2D5D5F; padding: 0 20px; box-sizing: border-box;">
    <div class="title" style="padding: 10px 20px;">
        <a href="/index.html" style="color: white; text-decoration: none; font-size: 24px; font-weight: bold;">ETAPA McGill</a>
    </div>
    <div id="menu" style="margin-left: auto; display: flex; padding: 10px 0; gap: 20px;">
        <div class="menuItem" id="menuItem1" onmouseover="showMenuItem(this)" onmouseout="hideMenuItem(this)" data-state="hidden">
            <div class="menuHeading">Research</div>
            <div id="popupMenu1" class="popupMenu">
                <div class="popupWrapper wrapper1">
                    <div class="popupSubheading"><a href="/Research/Publications/allPublications.html">Publications</a></div>
                    <div class="popupItem"><a href="/Research/Publications/advancingSpatio.html">Life cycle assessment: advancing spatiotemporal analyses of electricity generation and transportation systems</a></div>
                    <div class="popupItem"><a href="/Research/Publications/landUseInventories.html">Land use inventories for electricity generation infrastructure</a></div>
                    <div class="popupItem"><a href="/Research/Publications/LCATechnoEconomic.html">Integrated LCA and techno-economic analysis / costing of energy technologies</a></div>
                    <div class="popupItem"><a href="/Research/Publications/technology-policy.html">Technology-policy and energy systems analyses</a></div>
                    <div class="popupSubheading"><a href="/Research/projects.html">Projects</a></div>
                    <div class="popupItem"><a href="/About/TransportationGrid.html">Transportation-grid interdependence</a></div>
                    <div class="popupItem"><a href="/About/sling-ghg.html">SLiNG-GHG model</a></div>
                </div>
            </div>
        </div>
        <div class="menuItem" id="menuItem2" onmouseover="showMenuItem(this)" onmouseout="hideMenuItem(this)" data-state="hidden">
            <div class="menuHeading">Teaching</div>
            <div id="popupMenu2" class="popupMenu">
                <div class="popupWrapper wrapper2">
                    <div class="popupSubheading">Courses</div>
                    <div class="popupItem"><a href="/Teaching/URBP504/URBP504.html">SEAD 520: Life cycle-based Environmental Footprinting</a></div>
                    <div class="popupItem"><a href="/Teaching/URBP619/URBP619.html">SEAD 540: Industrial Ecology and Systems</a></div>
                    <div class="popupItem"><a href="/Teaching/URBP625/URBP625.html">CIVE 545: Life Cycle Assessment and the Circular Economy (Coming Soon)</a></div>
                    <div class="popupSubheading">Graduate-Student Information</div>
                    <div class="popupItem"><a href="/Teaching/srp/srp.html">Masters' Thesis</a></div>
                    <div class="popupItem"><a href="/Teaching/PhD/PhD.html">PhD Dissertations</a></div>
                </div>
            </div>
        </div>
        <div class="menuItem" id="menuItem3" onmouseover="showMenuItem(this)" onmouseout="hideMenuItem(this)" data-state="hidden">
            <div class="menuHeading">Data & Multimedia</div>
            <div id="popupMenu3" class="popupMenu">
                <div class="popupWrapper wrapper3">
                    <div class="popupSubheading"><a href="/Multimedia/gisData.html">GIS Data Archive</a></div>
                    <div class="popupSubheading"><a href="/Multimedia/pictures.php" id="teamPhotosLink">Team Photos</a></div>
                </div>
            </div>
        </div>
        <div class="menuItem" id="menuItem4" onmouseover="showMenuItem(this)" onmouseout="hideMenuItem(this)" data-state="hidden">
            <div class="menuHeading">About</div>
            <div id="popupMenu4" class="popupMenu">
                <div class="popupWrapper wrapper4">
                    <div class="popupSubheading"><a href="/About/about.html">About ETAPA</a></div>
                    <div class="popupSubheading"><a href="/About/members.html">Members</a></div>
                    <div class="popupSubheading"><a href="/About/alumni.html">Alumni</a></div>
                    <div class="popupSubheading"><a href="/About/jobs.html">Jobs</a></div>
                    <div class="popupSubheading"><a href="/About/contact.html">Contact</a></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="blackScreen" onclick="toggleMenu()"></div>
